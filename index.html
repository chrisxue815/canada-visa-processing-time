<!doctype html>
<html lang="en">
<head>
    <title>Canada visa processing time</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

    <div id="app">
      {{ type }} - {{countryName}} - {{time}}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>

    <script>

async function main() {
    const timesResp = await fetch('https://www.canada.ca/content/dam/ircc/documents/json/data-ptime-en.json');
    const times = await timesResp.json();

    const countryNamesResp = await fetch('https://www.canada.ca/content/dam/ircc/documents/json/data-country-name-en.json');
    const countryNames = await countryNamesResp.json();

    const url = new URL(location.href);
    const type = url.searchParams.get('type');
    const country = url.searchParams.get('country');
    const time = times[type] && times[type][country];
    const countryName = countryNames['country-name'] && countryNames['country-name'][country];

    const app = new Vue({
        el: '#app',
        data: {
            type,
            countryName,
            time,
        },
    });
}

main();

    </script>

</body>
</html>
